<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Stack Development Tree</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f172a, #1e293b, #334155);
            color: #e2e8f0;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin: 30px 0;
            font-size: 3rem;
            background: linear-gradient(135deg, #10b981, #34d399, #6ee7b7);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
            font-weight: bold;
        }

        /* Enhanced Tree Structure */
        .tree {
            position: relative;
            min-height: 120vh;
            padding-top: 100px;
        }

        /* Realistic trunk with bark texture */
        .trunk {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            background: linear-gradient(45deg, 
                #5d4e37 0%, #8b4513 25%, #6b4423 50%, #5d4e37 75%, #8b4513 100%);
            height: 350px;
            border-radius: 20px;
            z-index: 1;
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.3),
                0 0 30px rgba(0,0,0,0.5);
        }

        .trunk::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 2px,
                rgba(0,0,0,0.1) 2px,
                rgba(0,0,0,0.1) 4px
            );
            border-radius: 20px;
        }

        /* Enhanced branches with bark texture */
        .branch {
            position: absolute;
            background: linear-gradient(to right, 
                #5d4e37, #8b4513, #6b4423);
            height: 12px;
            border-radius: 6px;
            transform-origin: left center;
            z-index: 1;
            box-shadow: 
                inset 0 0 5px rgba(0,0,0,0.3),
                0 0 10px rgba(0,0,0,0.3);
        }

        /* Tech leaf styling */
        .leaf {
            position: absolute;
            width: 90px;
            height: 90px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 8px;
            font-weight: 600;
            font-size: 0.7rem;
            opacity: 0;
            transform: scale(0) rotate(45deg);
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            z-index: 2;
            border: 2px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        /* Overlay backdrop for details panel */
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(2px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
            z-index: 99;
        }
        .overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .leaf img {
            width: 36px;
            height: 36px;
            margin-bottom: 4px;
            border-radius: 6px;
        }

        /* Category-specific leaf colors */
        .leaf.frontend {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .leaf.backend {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        .leaf.database {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
            box-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        .leaf.devops {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }

        .leaf.ux {
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
        }

        .leaf.tools {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        /* Category labels */
        .category-label {
            position: absolute;
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 20px currentColor;
            opacity: 0;
            transition: opacity 0.5s ease;
            pointer-events: none;
            z-index: 3;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            gap: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.3);
            font-size: 1rem;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(124, 58, 237, 0.4);
        }

        button:disabled {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* Enhanced Details Panel */
        .details-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            width: 95%;
            max-width: 900px;
            max-height: 85vh;
            background: linear-gradient(135deg, #1e293b, #334155);
            border-radius: 25px;
            padding: 40px;
            box-shadow: 
                0 0 60px rgba(0,0,0,0.6),
                0 0 100px rgba(59, 130, 246, 0.1);
            z-index: 100;
            overflow-y: auto;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            opacity: 0;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
        }

        .details-panel.active {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        .details-panel h2 {
            color: #3b82f6;
            margin-bottom: 25px;
            font-size: 2.2rem;
            text-align: center;
            text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }

        .details-panel .tech-icon {
            display: block;
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            border-radius: 15px;
        }

        .details-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            border-left: 4px solid #3b82f6;
        }

        .details-section h3 {
            color: #60a5fa;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .details-panel p {
            margin-bottom: 15px;
            line-height: 1.7;
            color: #cbd5e1;
        }

        .details-panel ul {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .details-panel li {
            margin-bottom: 10px;
            color: #e2e8f0;
            line-height: 1.6;
        }

        .command-block {
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            position: relative;
            overflow-x: auto;
        }

        .command-block code {
            color: #10b981;
            font-size: 0.9rem;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #374151;
            border: none;
            color: #9ca3af;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: #4b5563;
            color: #f3f4f6;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            background: #ef4444;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #dc2626;
            transform: scale(1.1);
        }

        /* Search box */
        .search-input {
            padding: 10px 14px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.06);
            color: #e2e8f0;
            outline: none;
            width: 240px;
        }

        .search-input::placeholder {
            color: #94a3b8;
        }

        @media (max-width: 480px) {
            .search-input {
                width: 160px;
                padding: 6px 10px;
            }
        }

        /* Highlight matching leaves */
        .leaf.match {
            outline: 3px solid rgba(16,185,129,0.9);
            outline-offset: 2px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.3rem;
                margin: 18px 0;
            }

            .container {
                padding: 8px;
            }

            .tree {
                min-height: 100vh;
                padding-top: 40px;
            }

            .trunk {
                width: 22px;
                height: 180px;
                border-radius: 10px;
            }

            .branch {
                height: 7px;
                border-radius: 3.5px;
            }

            .leaf {
                width: 48px;
                height: 48px;
                font-size: 0.48rem;
                padding: 4px;
                border-radius: 10px;
            }

            .leaf img {
                width: 18px;
                height: 18px;
                margin-bottom: 2px;
                border-radius: 3px;
            }

            .category-label {
                font-size: 1rem;
                padding: 2px 6px;
                border-radius: 8px;
                background: rgba(0,0,0,0.15);
                left: auto !important;
                right: auto !important;
            }

            .details-panel {
                padding: 8px;
                width: 99%;
                max-width: 99vw;
                max-height: 90vh;
                border-radius: 12px;
            }

            .details-panel h2 {
                font-size: 1.1rem;
                margin-bottom: 10px;
            }

            .details-panel .tech-icon {
                width: 38px;
                height: 38px;
                margin-bottom: 10px;
                border-radius: 7px;
            }

            .details-section {
                margin-bottom: 12px;
                padding: 8px;
                border-radius: 7px;
                font-size: 0.8rem;
            }

            .details-section h3 {
                font-size: 0.9rem;
                margin-bottom: 7px;
            }

            .command-block {
                padding: 7px;
                font-size: 0.7rem;
                border-radius: 5px;
            }

            .copy-btn {
                top: 4px;
                right: 4px;
                padding: 2px 6px;
                font-size: 0.7rem;
                border-radius: 3px;
            }

            .close-btn {
                top: 7px;
                right: 7px;
                width: 24px;
                height: 24px;
                font-size: 0.9rem;
                border-radius: 50%;
            }

            .controls {
                gap: 10px;
                margin: 12px 0;
            }

            button {
                padding: 8px 16px;
                font-size: 0.8rem;
                border-radius: 30px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1rem;
                margin: 10px 0;
            }
            .container {
                padding: 2px;
            }
            .tree {
                min-height: 80vh;
                padding-top: 20px;
            }
            .trunk {
                width: 14px;
                height: 100px;
                border-radius: 7px;
            }
            .branch {
                height: 4px;
                border-radius: 2px;
            }
            .leaf {
                width: 32px;
                height: 32px;
                font-size: 0.38rem;
                padding: 2px;
                border-radius: 6px;
            }
            .leaf img {
                width: 12px;
                height: 12px;
                margin-bottom: 1px;
                border-radius: 2px;
            }
            .category-label {
                font-size: 0.7rem;
                padding: 1px 3px;
                border-radius: 5px;
            }
            .details-panel {
                padding: 3px;
                width: 100vw;
                max-width: 100vw;
                max-height: 95vh;
                border-radius: 7px;
            }
            .details-panel h2 {
                font-size: 0.8rem;
                margin-bottom: 5px;
            }
            .details-panel .tech-icon {
                width: 22px;
                height: 22px;
                margin-bottom: 5px;
                border-radius: 3px;
            }
            .details-section {
                margin-bottom: 6px;
                padding: 3px;
                border-radius: 3px;
                font-size: 0.6rem;
            }
            .details-section h3 {
                font-size: 0.6rem;
                margin-bottom: 3px;
            }
            .command-block {
                padding: 3px;
                font-size: 0.5rem;
                border-radius: 2px;
            }
            .copy-btn {
                top: 2px;
                right: 2px;
                padding: 1px 3px;
                font-size: 0.5rem;
                border-radius: 2px;
            }
            .close-btn {
                top: 3px;
                right: 3px;
                width: 14px;
                height: 14px;
                font-size: 0.6rem;
                border-radius: 50%;
            }
            .controls {
                gap: 5px;
                margin: 6px 0;
            }
            button {
                padding: 4px 8px;
                font-size: 0.6rem;
                border-radius: 15px;
            }
        }

        /* Hover effects only on hover-capable devices */
        @media (hover: hover) {
            .leaf:hover {
                transform: scale(1.2) rotate(0deg) !important;
                z-index: 10;
                box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            }
        }
        @media (hover: none) {
            .leaf:hover { transform: none !important; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŒ³ Full Stack Development Tree</h1>
        
        <div class="controls">
            <button id="startBtn">ðŸŒ± Grow the Tree</button>
            <button id="resetBtn" disabled>ðŸ”„ Reset Tree</button>
            <input id="searchInput" class="search-input" type="text" placeholder="Search tech..." />
        </div>
        
        <div class="tree">
            <!-- Trunk -->
            <div class="trunk"></div>

            <!-- Category Labels -->
            <div class="category-label" id="frontend-label" style="top: 120px; left: 20%; color: #3b82f6;">Frontend</div>
            <div class="category-label" id="backend-label" style="top: 200px; right: 20%; color: #ef4444;">Backend</div>
            <div class="category-label" id="database-label" style="top: 300px; left: 15%; color: #06b6d4;">Database</div>
            <div class="category-label" id="devops-label" style="top: 400px; right: 15%; color: #f59e0b;">DevOps</div>
            <div class="category-label" id="ux-label" style="top: 500px; left: 20%; color: #10b981;">UX/UI</div>
            <div class="category-label" id="tools-label" style="top: 580px; right: 20%; color: #8b5cf6;">Tools</div>

            <!-- Branches -->
            <div class="branch" id="frontend-branch"></div>
            <div class="branch" id="backend-branch"></div>
            <div class="branch" id="database-branch"></div>
            <div class="branch" id="devops-branch"></div>
            <div class="branch" id="ux-branch"></div>
            <div class="branch" id="tools-branch"></div>

            <!-- Frontend Leaves -->
            <div class="leaf frontend" id="html" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg" alt="HTML">
                HTML5
            </div>
            <div class="leaf frontend" id="css" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/css3/css3-original.svg" alt="CSS">
                CSS3
            </div>
            <div class="leaf frontend" id="javascript" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" alt="JavaScript">
                JavaScript
            </div>
            <div class="leaf frontend" id="react" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/react/react-original.svg" alt="React">
                React
            </div>
            <div class="leaf frontend" id="angular" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/angularjs/angularjs-original.svg" alt="Angular">
                Angular
            </div>
            <div class="leaf frontend" id="vue" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vuejs/vuejs-original.svg" alt="Vue.js">
                Vue.js
            </div>
            <div class="leaf frontend" id="nextjs" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nextjs/nextjs-original.svg" alt="Next.js" style="background: white; border-radius: 6px;">
                Next.js
            </div>
            <div class="leaf frontend" id="svelte" data-category="frontend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/svelte/svelte-original.svg" alt="Svelte">
                Svelte
            </div>

            <!-- Backend Leaves -->
            <div class="leaf backend" id="nodejs" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nodejs/nodejs-original.svg" alt="Node.js">
                Node.js
            </div>
            <div class="leaf backend" id="express" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/express/express-original.svg" alt="Express" style="background: white; border-radius: 6px;">
                Express
            </div>
            <div class="leaf backend" id="python" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python">
                Python
            </div>
            <div class="leaf backend" id="django" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/django/django-plain.svg" alt="Django" style="background: white; border-radius: 6px;">
                Django
            </div>
            <div class="leaf backend" id="flask" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/flask/flask-original.svg" alt="Flask" style="background: white; border-radius: 6px;">
                Flask
            </div>
            <div class="leaf backend" id="php" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg" alt="PHP">
                PHP
            </div>
            <div class="leaf backend" id="laravel" data-category="backend">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/laravel/laravel-plain.svg" alt="Laravel">
                Laravel
            </div>

            <!-- Database Leaves -->
            <div class="leaf database" id="mongodb" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mongodb/mongodb-original.svg" alt="MongoDB">
                MongoDB
            </div>
            <div class="leaf database" id="mysql" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg" alt="MySQL">
                MySQL
            </div>
            <div class="leaf database" id="postgresql" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/postgresql/postgresql-original.svg" alt="PostgreSQL">
                PostgreSQL
            </div>
            <div class="leaf database" id="firebase" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/firebase/firebase-plain.svg" alt="Firebase">
                Firebase
            </div>
            <div class="leaf database" id="redis" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/redis/redis-original.svg" alt="Redis">
                Redis
            </div>
            <div class="leaf database" id="sqlite" data-category="database">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sqlite/sqlite-original.svg" alt="SQLite">
                SQLite
            </div>

            <!-- DevOps Leaves -->
            <div class="leaf devops" id="docker" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" alt="Docker">
                Docker
            </div>
            <div class="leaf devops" id="kubernetes" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/kubernetes/kubernetes-plain.svg" alt="Kubernetes">
                Kubernetes
            </div>
            <div class="leaf devops" id="aws" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/amazonwebservices/amazonwebservices-original.svg" alt="AWS">
                AWS
            </div>
            <div class="leaf devops" id="azure" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/azure/azure-original.svg" alt="Azure">
                Azure
            </div>
            <div class="leaf devops" id="jenkins" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/jenkins/jenkins-original.svg" alt="Jenkins">
                Jenkins
            </div>
            <div class="leaf devops" id="nginx" data-category="devops">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/nginx/nginx-original.svg" alt="Nginx">
                Nginx
            </div>

            <!-- UX/UI Leaves -->
            <div class="leaf ux" id="figma" data-category="ux">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/figma/figma-original.svg" alt="Figma">
                Figma
            </div>
            <div class="leaf ux" id="adobe-xd" data-category="ux">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/xd/xd-plain.svg" alt="Adobe XD">
                Adobe XD
            </div>
            <div class="leaf ux" id="sketch" data-category="ux">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/sketch/sketch-original.svg" alt="Sketch">
                Sketch
            </div>
            <div class="leaf ux" id="photoshop" data-category="ux">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/photoshop/photoshop-plain.svg" alt="Photoshop">
                Photoshop
            </div>
            <div class="leaf ux" id="tailwind" data-category="ux">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-plain.svg" alt="Tailwind CSS">
                Tailwind
            </div>

            <!-- Tools Leaves -->
            <div class="leaf tools" id="git" data-category="tools">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg" alt="Git">
                Git
            </div>
            <div class="leaf tools" id="vscode" data-category="tools">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg" alt="VS Code">
                VS Code
            </div>
            <div class="leaf tools" id="github" data-category="tools">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg" alt="GitHub" style="background: white; border-radius: 6px;">
                GitHub
            </div>
            <div class="leaf tools" id="npm" data-category="tools">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/npm/npm-original-wordmark.svg" alt="npm" style="background: white; border-radius: 6px;">
                npm
            </div>
            <div class="leaf tools" id="webpack" data-category="tools">
                <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/webpack/webpack-original.svg" alt="Webpack">
                Webpack
            </div>
            <div class="leaf tools" id="postman" data-category="tools">
                <img src="https://www.vectorlogo.zone/logos/getpostman/getpostman-icon.svg" alt="Postman">
                Postman
            </div>
        </div>
        
        <div class="details-panel" id="detailsPanel">
            <div class="close-btn" id="closeBtn">Ã—</div>
            <img id="detailIcon" class="tech-icon" src="" alt="">
            <h2 id="detailTitle">Technology Details</h2>
            <div id="detailContent">
                <p>Select a technology to view details</p>
            </div>
        </div>
        <!-- Overlay backdrop -->
        <div class="overlay" id="overlay"></div>
    </div>

    <script>
        // Define categories globally for consistent layout
        const categories = ['frontend', 'backend', 'database', 'devops', 'ux', 'tools'];

        // Viewport-aware layout values
        const layout = { branchLength: 400, baseTop: 400, labelOffset: 40 };

        // Compute responsive layout from current viewport and trunk size
        function computeLayout() {
            const tree = document.querySelector('.tree');
            const trunk = document.querySelector('.trunk');
            if (!tree || !trunk) return;
            const treeRect = tree.getBoundingClientRect();
            const trunkH = parseFloat(getComputedStyle(trunk).height) || 350;
            const minSide = Math.min(treeRect.width || window.innerWidth, treeRect.height || window.innerHeight);
            layout.branchLength = Math.max(110, Math.min(0.38 * minSide, 460));
            layout.baseTop = Math.max(60, trunkH * 0.8);
            layout.labelOffset = Math.max(24, Math.min(layout.branchLength * 0.18, 80));
        }

        // Position animated category labels radially around the tree
        function positionCategoryLabels() {
            const cats = ['frontend', 'backend', 'database', 'devops', 'ux', 'tools'];
            const branchCount = cats.length;
            cats.forEach((cat, index) => {
                const label = document.getElementById(cat + '-label');
                if (!label) return;
                const angle = (360 / branchCount) * index - 90;
                const rad = angle * Math.PI / 180;
                const r = layout.branchLength + layout.labelOffset;
                label.style.left = `calc(50% + ${Math.cos(rad) * r}px)`;
                label.style.top = `${layout.baseTop + Math.sin(rad) * r}px`;
            });
        }

        // Refit grown branches/leaves without re-animating (used on resize)
        function repositionGrownTree() {
            const cats = ['frontend', 'backend', 'database', 'devops', 'ux', 'tools'];
            const branchCount = cats.length;
            cats.forEach((category, index) => {
                const branch = document.getElementById(category + '-branch');
                const angle = (360 / branchCount) * index - 90;
                if (branch && (parseFloat(getComputedStyle(branch).width) || 0) > 0.5) {
                    branch.style.left = '50%';
                    branch.style.top = `${layout.baseTop}px`;
                    branch.style.width = `${layout.branchLength}px`;
                    branch.style.transform = `rotate(${angle}deg)`;
                }
                const leaves = document.querySelectorAll(`.leaf[data-category="${category}"]`);
                const rad = angle * Math.PI / 180;
                leaves.forEach((leaf, i) => {
                    const distance = (layout.branchLength / (leaves.length + 1)) * (i + 1);
                    const x = Math.cos(rad) * distance;
                    const y = Math.sin(rad) * distance;
                    leaf.style.left = `calc(50% + ${x}px)`;
                    leaf.style.top = `${layout.baseTop + y}px`;
                });
            });
            positionCategoryLabels();
        }

        // Debounced resize keeping the tree in view
        if (!window.__treeResizeAttached) {
            window.__treeResizeAttached = true;
            let t;
            window.addEventListener('resize', () => {
                clearTimeout(t);
                t = setTimeout(() => { computeLayout(); repositionGrownTree(); }, 120);
            });
        }

        // Hook computeLayout into animation start
        if (typeof startAnimation === 'function' && !startAnimation.__layoutPatched) {
            const __origStart = startAnimation;
            window.startAnimation = function() {
                computeLayout();
                positionCategoryLabels();
                return __origStart();
            };
            window.startAnimation.__layoutPatched = true;
        }

        // Replace fixed sizes in growBranch with layout-powered values
        if (typeof growBranch === 'function' && !growBranch.__layoutPatched) {
            window.growBranch = function(category, index) {
                const branch = document.getElementById(category + '-branch');
                const branchCount = 6;
                const angle = (360 / branchCount) * index - 90;
                branch.style.left = '50%';
                branch.style.top = `${layout.baseTop}px`;
                branch.style.width = `${layout.branchLength}px`;
                branch.style.transform = `rotate(${angle}deg)`;
                branch.style.transition = 'width 1s ease-out';
            };
            window.growBranch.__layoutPatched = true;
        }

        // Replace fixed sizes in animateLeaves with layout-powered values
        if (typeof animateLeaves === 'function' && !animateLeaves.__layoutPatched) {
            window.animateLeaves = function(category, branchIndex) {
                const leaves = document.querySelectorAll(`.leaf[data-category="${category}"]`);
                const branchCount = 6;
                const angle = (360 / branchCount) * branchIndex - 90;
                const rad = angle * Math.PI / 180;
                leaves.forEach((leaf, i) => {
                    setTimeout(() => {
                        const distance = (layout.branchLength / (leaves.length + 1)) * (i + 1);
                        const x = Math.cos(rad) * distance;
                        const y = Math.sin(rad) * distance;
                        leaf.style.left = `calc(50% + ${x}px)`;
                        leaf.style.top = `${layout.baseTop + y}px`;
                        leaf.style.opacity = '1';
                        leaf.style.transform = 'scale(1) rotate(0deg)';
                    }, i * 200);
                });
            };
            window.animateLeaves.__layoutPatched = true;
        }

        // Overlay integration for details panel
        const overlay = document.getElementById('overlay');
        if (typeof showTechDetails === 'function' && !showTechDetails.__overlayPatched) {
            const __origShow = showTechDetails;
            window.showTechDetails = function(techId) {
                __origShow(techId);
                if (overlay) overlay.classList.add('active');
            };
            window.showTechDetails.__overlayPatched = true;
        }
        if (typeof closeBtn !== 'undefined' && closeBtn) {
            closeBtn.addEventListener('click', () => {
                if (overlay) overlay.classList.remove('active');
            });
        }
        if (overlay) {
            overlay.addEventListener('click', () => {
                const panel = document.getElementById('detailsPanel');
                if (panel) panel.classList.remove('active');
                overlay.classList.remove('active');
            });
        }
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const panel = document.getElementById('detailsPanel');
                if (panel && panel.classList.contains('active')) {
                    panel.classList.remove('active');
                    if (overlay) overlay.classList.remove('active');
                }
            }
        });

        // Add search filtering
        const searchInput = document.getElementById('searchInput');
        if (searchInput && !searchInput.__wired) {
            searchInput.addEventListener('input', () => {
                const q = searchInput.value.trim().toLowerCase();
                const leaves = Array.from(document.querySelectorAll('.leaf'));
                const byCat = { frontend:0, backend:0, database:0, devops:0, ux:0, tools:0 };
                leaves.forEach(leaf => {
                    const text = leaf.textContent.trim().toLowerCase();
                    const match = q.length === 0 || text.includes(q);
                    leaf.style.display = match ? 'flex' : 'none';
                    leaf.classList.toggle('match', !!q && match);
                    if (match) byCat[leaf.dataset.category]++;
                });
                // Toggle category labels visibility/intensity based on matches
                Object.keys(byCat).forEach(cat => {
                    const label = document.getElementById(cat + '-label');
                    if (!label) return;
                    if (q.length === 0) {
                        label.style.opacity = '1';
                    } else {
                        label.style.opacity = byCat[cat] > 0 ? '1' : '0.2';
                    }
                });
            });
            searchInput.__wired = true;
        }

        // Initial layout compute so labels/branches start in correct positions
        try {
            computeLayout();
            positionCategoryLabels();
        } catch (_) { /* no-op if functions not defined yet */ }

        // Core animation and interactions
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const detailsPanel = document.getElementById('detailsPanel');
        const detailTitle = document.getElementById('detailTitle');
        const detailIcon = document.getElementById('detailIcon');
        const detailContent = document.getElementById('detailContent');
        const closeBtn = document.getElementById('closeBtn');

        function setLabelsOpacity(val) {
            categories.forEach(cat => {
                const label = document.getElementById(cat + '-label');
                if (label) label.style.opacity = String(val);
            });
        }

        function showTechDetails(techId) {
            const leaf = document.getElementById(techId);
            if (!leaf) return;
            const title = (leaf.textContent || '').trim();
            const img = leaf.querySelector('img');
            if (detailTitle) detailTitle.textContent = title || 'Technology Details';
            if (detailIcon && img) { detailIcon.src = img.src; detailIcon.alt = title; }
            if (detailContent) {
                const cat = leaf.dataset.category || '';
                detailContent.innerHTML = `
                    <div class="details-section">
                        <h3>Overview</h3>
                        <p><strong>${title}</strong> is part of the <strong>${cat.toUpperCase()}</strong> branch in this tree. Explore official docs and starter guides to dive deeper.</p>
                    </div>
                    <div class="details-section">
                        <h3>Resources</h3>
                        <ul>
                            <li>Search: <a href="https://www.google.com/search?q=${encodeURIComponent(title + ' official docs')}" target="_blank" rel="noreferrer">${title} official docs</a></li>
                            <li>Awesome lists: <a href="https://github.com/sindresorhus/awesome" target="_blank" rel="noreferrer">Curated resources</a></li>
                        </ul>
                    </div>
                `;
            }
            if (detailsPanel) detailsPanel.classList.add('active');
        }

        function growBranch(category, index) {
            const branch = document.getElementById(category + '-branch');
            if (!branch) return;
            const branchCount = categories.length;
            const angle = (360 / branchCount) * index - 90;
            // place branch
            branch.style.left = '50%';
            branch.style.top = `${layout.baseTop}px`;
            branch.style.transform = `rotate(${angle}deg)`;
            branch.style.transition = 'width 900ms ease-out';
            // animate width from 0 to full
            branch.style.width = '0px';
            // ensure transition kicks in
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    branch.style.width = `${layout.branchLength}px`;
                });
            });
        }

        function animateLeaves(category, branchIndex) {
            const leaves = Array.from(document.querySelectorAll(`.leaf[data-category="${category}"]`));
            const branchCount = categories.length;
            const angle = (360 / branchCount) * branchIndex - 90;
            const rad = angle * Math.PI / 180;
            leaves.forEach((leaf, i) => {
                // reset initial state
                leaf.style.opacity = '0';
                leaf.style.transform = 'scale(0) rotate(45deg)';
                leaf.style.display = 'flex';
                setTimeout(() => {
                    const distance = (layout.branchLength / (leaves.length + 1)) * (i + 1);
                    const x = Math.cos(rad) * distance;
                    const y = Math.sin(rad) * distance;
                    leaf.style.left = `calc(50% + ${x}px)`;
                    leaf.style.top = `${layout.baseTop + y}px`;
                    leaf.style.opacity = '1';
                    leaf.style.transform = 'scale(1) rotate(0deg)';
                }, i * 180 + 150);
            });
        }

        function startAnimation() {
            if (startBtn) startBtn.disabled = true;
            if (resetBtn) resetBtn.disabled = false;
            computeLayout();
            positionCategoryLabels();
            setLabelsOpacity(1);
            categories.forEach((category, index) => {
                setTimeout(() => {
                    growBranch(category, index);
                    setTimeout(() => animateLeaves(category, index), 950);
                }, index * 180);
            });
            // wire leaf clicks once
            const leaves = document.querySelectorAll('.leaf');
            leaves.forEach(leaf => {
                if (!leaf.__wiredClick) {
                    leaf.addEventListener('click', () => showTechDetails(leaf.id));
                    leaf.__wiredClick = true;
                }
            });
        }

        function resetTree() {
            if (startBtn) startBtn.disabled = false;
            if (resetBtn) resetBtn.disabled = true;
            // reset branches
            categories.forEach(category => {
                const branch = document.getElementById(category + '-branch');
                if (branch) {
                    branch.style.transition = 'none';
                    branch.style.width = '0px';
                    // force reflow then restore transition
                    void branch.offsetWidth;
                    branch.style.transition = 'width 900ms ease-out';
                }
            });
            // reset leaves
            const leaves = document.querySelectorAll('.leaf');
            leaves.forEach(leaf => {
                leaf.style.opacity = '0';
                leaf.style.transform = 'scale(0) rotate(45deg)';
                leaf.style.left = '';
                leaf.style.top = '';
                leaf.style.display = 'flex';
                leaf.classList.remove('match');
            });
            // clear search
            const searchInputEl = document.getElementById('searchInput');
            if (searchInputEl) searchInputEl.value = '';
            // hide details
            if (detailsPanel) detailsPanel.classList.remove('active');
            const overlayEl = document.getElementById('overlay');
            if (overlayEl) overlayEl.classList.remove('active');
            // labels subtle hide
            setLabelsOpacity(0);
        }

        if (startBtn && !startBtn.__wired) {
            startBtn.addEventListener('click', startAnimation);
            startBtn.__wired = true;
        }
        if (resetBtn && !resetBtn.__wired) {
            resetBtn.addEventListener('click', resetTree);
            resetBtn.__wired = true;
        }

        if (closeBtn && !closeBtn.__wired) {
            closeBtn.addEventListener('click', () => {
                if (detailsPanel) detailsPanel.classList.remove('active');
            });
            closeBtn.__wired = true;
        }
    </script>
</body>
</html>